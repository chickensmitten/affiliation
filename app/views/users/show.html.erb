<h2><%= @user.username %>'s Profile</h2>

<p>
  <% if logged_in? && @user != current_user %>
    <% if !current_user.followings.include?(@user) %>
      <%= link_to "Follow", user_relationships_path(@user), method: 'post' %>
    <% else %>   
      <%= link_to "Unfollow", user_relationship_path(@user, current_user), method: 'delete' %>
      <br>
      <input type="text" readonly id="sharelink" value="<%=user_url(current_user.leader_relationships.where("leader_id = ?",@user.id).first.url)%>" style="float:left;">
      <div style="display:none;">
        <img src="/assets/copy.png" id="d_clip_button" class="my_clip_button" title="Click me to copy to clipboard." data-clipboard-target="sharelink" data-clipboard-text="sharelink"></p>
    <% end %>
  <% else %>
  <% end %>
</p>

<% @posts.each do |post| %>
  <%= render 'posts/post', post: post %>
<% end if @posts.present? %>

<%= render 'shared/will_paginate' if @posts.present?  %>


<script>

// Configure the root ZeroClipboard object
ZeroClipboard.config({

  // The path must be relative to the PAGE, NOT to the current AMD module!
  // Or, it could be an absolute path on the domain, e.g.:
  //  - "/javascripts/ZeroClipboard.swf"
  // Or, it could be an absolute URL to anywhere, e.g.:
  //  - "//" + window.location.host + "/javascripts/ZeroClipboard.swf"
  //  - "//localhost:3000/javascripts/ZeroClipboard.swf"
  //  - "//my.awesomecdn.com/javascripts/ZeroClipboard.swf"
  //  - "http://my.awesomecdn.com/javascripts/ZeroClipboard.swf"
  moviePath: "/assets/ZeroClipboard.swf"

});

$(document).ready(function() {

  var clip = new ZeroClipboard($("#d_clip_button"));

  clip.on("load", function (client) {
    $("#d_clip_button").parent().show()
  });
});
</script>
